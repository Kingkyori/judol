(()=>{var e={};e.id=797,e.ids=[797],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},648:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d}),a(2637),a(5884),a(5866);var s=a(3191),n=a(8716),r=a(7922),i=a.n(r),l=a(5231),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);a.d(t,o);let d=["",{children:["user",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,2637)),"E:\\PROGRAM\\judol\\app\\user\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,5884)),"E:\\PROGRAM\\judol\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,5866,23)),"next/dist/client/components/not-found-error"]}],c=["E:\\PROGRAM\\judol\\app\\user\\page.tsx"],u="/user/page",m={require:a,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/user/page",pathname:"/user",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},3497:(e,t,a)=>{Promise.resolve().then(a.bind(a,9188)),Promise.resolve().then(a.bind(a,1813))},7138:(e,t,a)=>{Promise.resolve().then(a.bind(a,3557))},9822:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,2994,23)),Promise.resolve().then(a.t.bind(a,6114,23)),Promise.resolve().then(a.t.bind(a,9727,23)),Promise.resolve().then(a.t.bind(a,9671,23)),Promise.resolve().then(a.t.bind(a,1868,23)),Promise.resolve().then(a.t.bind(a,4759,23))},9188:(e,t,a)=>{"use strict";a.d(t,{default:()=>l});var s=a(326),n=a(434),r=a(7541),i=a.n(r);function l(){return(0,s.jsxs)("nav",{className:i().nav,children:[s.jsx(n.default,{href:"/",children:"Beranda"}),s.jsx(n.default,{href:"/admin",children:"Admin"}),s.jsx(n.default,{href:"/auth/user-login",children:"User"})]})}},3557:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>o});var s=a(326),n=a(7577),r=a(434),i=a(5047),l=a(1813);function o(){let{user:e}=(0,l.a)(),t=(0,i.useRouter)(),[a,o]=(0,n.useState)(!1),[d,c]=(0,n.useState)(!0),[u,m]=(0,n.useState)(null),[p,h]=(0,n.useState)(null),[x,g]=(0,n.useState)(null),[j,v]=(0,n.useState)(!1),f=(0,n.useMemo)(()=>["7","♣","♥","♦","★","\uD83C\uDF52","\uD83D\uDD14","\uD83C\uDF4B"],[]),b=1200*f.length,[N,y]=(0,n.useState)([0,0,0]),[P,A]=(0,n.useState)(["none","none","none"]),S=(0,n.useRef)([]),[_,k]=(0,n.useState)(null),[M,w]=(0,n.useState)(!1),E=(0,n.useMemo)(()=>u?{jackpotEnabled:p&&null!==p.jackpotenabled&&void 0!==p.jackpotenabled?p.jackpotenabled:u.jackpotEnabled,jackpotPercent:p&&null!==p.jackpotpercent&&void 0!==p.jackpotpercent?p.jackpotpercent:u.jackpotPercent,allowWin:p&&null!==p.allowwin&&void 0!==p.allowwin?p.allowwin:u.allowWin}:null,[u,p]);async function R(){if(j)return;g(null),k(null),v(!0);let t=Date.now(),a=[1600,1900,2200],s=[1100,1200,1300];A(["none","none","none"]);let n=[t,t,t],r=e=>{let r=()=>{let i=Date.now(),l=(i-n[e])/1e3;n[e]=i;let o=Math.min(1,(i-t)/a[e]);y(t=>{let a=[...t],n=a[e]+s[e]*l;return a[e]=Math.min(n,b-120),a}),o<1&&(S.current[e]=requestAnimationFrame(r))};S.current[e]=requestAnimationFrame(r)};r(0),r(1),r(2);try{let t=await fetch("/api/simulate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({playerId:e?.id})}),s=t.ok?await t.json():null,n=f.length,r=Math.floor(Math.random()*n),i=[r,(r+1)%n,(r+3)%n],l=s?.outcome??"LOSE";"WIN"===l&&(i=[r,r,r]);let o=e=>{let t=N[e],a=120*i[e],s=120*n,r=[];for(let e=0;e<10;e++)r.push(a+e*s);let l=r.filter(e=>e>=t),o=l.length?Math.min(...l):a;A(t=>{let a=[...t];return a[e]="transform 420ms cubic-bezier(0.22, 1, 0.36, 1)",a}),y(t=>{let a=[...t];return a[e]=Math.min(o,b-120),a}),S.current[e]&&cancelAnimationFrame(S.current[e])};a.forEach((e,t)=>{setTimeout(()=>o(t),e+50)}),setTimeout(()=>{g(s),"WIN"===l?(k("Selamat! Anda MENANG."),w(!0),setTimeout(()=>w(!1),1500)):"LOSE"===l?k("Maaf, Anda KALAH."):"DISABLED"===l&&k("Jackpot sedang tidak aktif."),v(!1)},Math.max(...a)+500)}catch{v(!1)}}return s.jsx("div",{className:"container",children:d?s.jsx("div",{style:{textAlign:"center",padding:"40px"},children:s.jsx("p",{children:"Loading..."})}):a?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"card",style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[(0,s.jsxs)("h2",{style:{margin:0},children:["Selamat datang, ",e?.username,"!"]}),s.jsx("button",{onClick:()=>{localStorage.removeItem("user"),localStorage.removeItem("userRole"),t.push("/")},style:{padding:"8px 16px",backgroundColor:"#ef4444",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:600},children:"Logout"})]}),(0,s.jsxs)("div",{className:"card",children:[s.jsx("div",{className:"hero-title",children:"Mesin Jackpot"}),s.jsx("div",{className:"hero-subtitle",children:"Coba keberuntungan Anda, lihat dampak dari pengaturan Admin secara langsung."}),u&&E?(0,s.jsxs)("div",{className:"grid-two",style:{marginTop:16},children:[(0,s.jsxs)("div",{style:{justifySelf:"center"},children:[(0,s.jsxs)("div",{className:"slot-wrap",children:[s.jsx("div",{className:`slot ${x?.outcome==="WIN"?"win":x?.outcome==="LOSE"?"lose":""}`,role:"img","aria-label":"Mesin slot 3 reel",children:[0,1,2].map(e=>s.jsx("div",{className:`reel ${j?"spinning":""}`,children:s.jsx("div",{className:"symbols",style:{transform:`translateY(-${N[e]}px)`,transition:P[e]},children:Array.from({length:10}).flatMap(()=>f).map((t,a)=>s.jsx("div",{className:"symbol",children:t},e+"-"+a))})},e))}),M&&s.jsx("div",{className:"confetti","aria-hidden":!0,children:Array.from({length:14}).map((e,t)=>s.jsx("span",{className:"confetti-piece",style:{left:`${7*t%100}%`,background:["#ef4444","#22c55e","#3b82f6","#f59e0b"][t%4]}},t))})]}),(0,s.jsxs)("div",{style:{display:"flex",gap:12,marginTop:14,justifyContent:"center"},children:[s.jsx("button",{className:"btn btn-primary",onClick:R,disabled:j,children:j?"Memutar…":"Spin"}),s.jsx(r.default,{className:"btn btn-ghost",href:"/",children:"Beranda"})]}),x?.outcome&&s.jsx("div",{className:`badge ${"WIN"===x.outcome?"win":"LOSE"===x.outcome?"lose":"info"}`,style:{marginTop:10,justifySelf:"center"},children:"WIN"===x.outcome?"MENANG":"LOSE"===x.outcome?"KALAH":"DISABLED"===x.outcome?"NONAKTIF":x.outcome}),_&&s.jsx("div",{className:"notice",style:{marginTop:10},"aria-live":"polite",children:_})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"stat-list",children:[(0,s.jsxs)("div",{className:"stat",children:[s.jsx("span",{children:"\uD83D\uDCA1"}),s.jsx("div",{className:"label",children:"Jackpot Aktif"}),s.jsx("div",{className:"value",children:E.jackpotEnabled?"Ya":"Tidak"})]}),(0,s.jsxs)("div",{className:"stat",children:[s.jsx("span",{children:"\uD83C\uDFAF"}),s.jsx("div",{className:"label",children:"Izinkan Menang"}),s.jsx("div",{className:"value",children:E.allowWin?"Ya":"Tidak"})]}),(0,s.jsxs)("div",{className:"stat",children:[s.jsx("span",{children:"\uD83D\uDCC8"}),s.jsx("div",{className:"label",children:"Presentase Jackpot"}),s.jsx("div",{className:"value",children:E.jackpotPercent})]})]}),s.jsx("div",{className:"card",style:{marginTop:12},children:s.jsx("p",{children:"Tekan tombol untuk mencoba spin. Hasil akan mengikuti pengaturan dari Admin."})})]})]}):s.jsx("p",{style:{marginTop:12},children:"Memuat pengaturan…"})]})]}):s.jsx("div",{style:{textAlign:"center",padding:"40px"},children:s.jsx("p",{children:"Silakan login sebagai user terlebih dahulu."})})})}},1813:(e,t,a)=>{"use strict";a.d(t,{AuthProvider:()=>i,a:()=>l});var s=a(326),n=a(7577);let r=(0,n.createContext)(void 0);function i({children:e}){let[t,a]=(0,n.useState)(null),[i,l]=(0,n.useState)(!0),o=async(e,t)=>{try{let s=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:t})}),n=await s.json();if(!s.ok)return{success:!1,message:n.message||"Login gagal"};return a(n.user),localStorage.setItem("judol_user",JSON.stringify(n.user)),{success:!0,message:"Login berhasil"}}catch(e){return console.error("Login error:",e),{success:!1,message:"Terjadi kesalahan"}}},d=async()=>{a(null),localStorage.removeItem("judol_user")};return s.jsx(r.Provider,{value:{user:t,isLoading:i,login:o,logout:d,isAuthenticated:!!t},children:e})}function l(){let e=(0,n.useContext)(r);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},5047:(e,t,a)=>{"use strict";var s=a(7389);a.o(s,"useRouter")&&a.d(t,{useRouter:function(){return s.useRouter}})},7541:e=>{e.exports={nav:"HeaderNav_nav__jYxbd",loginBtn:"HeaderNav_loginBtn__7X1hG",userMenu:"HeaderNav_userMenu__bUlai",username:"HeaderNav_username__Bd9zX",logoutBtn:"HeaderNav_logoutBtn___OIxE"}},5884:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>h,metadata:()=>p});var s=a(9510);a(7272);var n=a(8570);let r=(0,n.createProxy)(String.raw`E:\PROGRAM\judol\lib\auth-context.tsx`),{__esModule:i,$$typeof:l}=r;r.default;let o=(0,n.createProxy)(String.raw`E:\PROGRAM\judol\lib\auth-context.tsx#AuthProvider`);(0,n.createProxy)(String.raw`E:\PROGRAM\judol\lib\auth-context.tsx#useAuth`);let d=(0,n.createProxy)(String.raw`E:\PROGRAM\judol\app\components\HeaderNav.tsx`),{__esModule:c,$$typeof:u}=d;d.default;let m=(0,n.createProxy)(String.raw`E:\PROGRAM\judol\app\components\HeaderNav.tsx#default`),p={title:"Judol Learning App",description:"Admin-user linked settings demo"};function h({children:e}){return s.jsx("html",{lang:"id",children:s.jsx("body",{className:"app",children:(0,s.jsxs)(o,{children:[s.jsx("header",{className:"site-header",children:(0,s.jsxs)("div",{className:"site-header__inner",children:[s.jsx("div",{className:"brand",children:"Judol"}),s.jsx(m,{})]})}),s.jsx("main",{className:"site-main",children:e}),s.jsx("footer",{className:"site-footer",children:s.jsx("div",{className:"site-footer__inner",children:(0,s.jsxs)("span",{children:["\xa9 ",new Date().getFullYear()," Judol"]})})})]})})})}},2637:(e,t,a)=>{"use strict";a.r(t),a.d(t,{$$typeof:()=>i,__esModule:()=>r,default:()=>l});var s=a(8570);let n=(0,s.createProxy)(String.raw`E:\PROGRAM\judol\app\user\page.tsx`),{__esModule:r,$$typeof:i}=n;n.default;let l=(0,s.createProxy)(String.raw`E:\PROGRAM\judol\app\user\page.tsx#default`)},7272:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),s=t.X(0,[948,372],()=>a(648));module.exports=s})();
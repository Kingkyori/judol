"use strict";(()=>{var e={};e.id=284,e.ids=[284],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},1017:e=>{e.exports=require("path")},5401:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>f,patchFetch:()=>h,requestAsyncStorage:()=>d,routeModule:()=>p,serverHooks:()=>j,staticGenerationAsyncStorage:()=>m});var a={};r.r(a),r.d(a,{POST:()=>u});var n=r(9303),o=r(8716),i=r(670),s=r(7070),c=r(4147),l=r(5662);async function u(e){try{let t=await (0,c.G)(),r=null;try{let t=await e.json().catch(()=>({}));if(t.playerId){let{data:e}=await l.R.from("player_settings").select("*").eq("player_id",t.playerId).single();r=e}}catch(e){}let a=r?.jackpotenabled!==void 0?r.jackpotenabled:t.jackpotEnabled,n=r?.allowwin!==void 0?r.allowwin:t.allowWin,o=r?.jackpotpercent!==void 0?r.jackpotpercent:t.jackpotPercent;if(!a)return s.NextResponse.json({outcome:"DISABLED"});if(!n)return s.NextResponse.json({outcome:"LOSE"});return s.NextResponse.json({outcome:Math.random()<o?"WIN":"LOSE"})}catch(r){console.error("Simulate error:",r);let e=await (0,c.G)();if(!e.jackpotEnabled)return s.NextResponse.json({outcome:"DISABLED"});if(!e.allowWin)return s.NextResponse.json({outcome:"LOSE"});let t=Math.random()<e.jackpotPercent;return s.NextResponse.json({outcome:t?"WIN":"LOSE"})}}let p=new n.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/simulate/route",pathname:"/api/simulate",filename:"route",bundlePath:"app/api/simulate/route"},resolvedPagePath:"E:\\PROGRAM\\judol\\app\\api\\simulate\\route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:d,staticGenerationAsyncStorage:m,serverHooks:j}=p,f="/api/simulate/route";function h(){return(0,i.patchFetch)({serverHooks:j,staticGenerationAsyncStorage:m})}},4147:(e,t,r)=>{r.d(t,{G:()=>u,I:()=>p});let a=require("fs");var n=r(1017),o=r.n(n);let i={jackpotEnabled:!0,jackpotPercent:.3,allowWin:!0},s=null,c=o().join(process.cwd(),"data","settings.json");async function l(){try{let e=await a.promises.readFile(c,"utf-8");return JSON.parse(e)}catch{return null}}async function u(){if(s)return s;let e=function(){try{let e=process.env.JUDOL_SETTINGS;if(e)return JSON.parse(e)}catch{}return null}();if(e)return s=e,e;let t=await l();return t?(s=t,t):(s=i,i)}async function p(e){s=e,function(e){try{process.env.JUDOL_SETTINGS=JSON.stringify(e)}catch{}}(e);let t=o().dirname(c);try{await a.promises.mkdir(t,{recursive:!0}),await a.promises.writeFile(c,JSON.stringify(e,null,2),"utf-8")}catch(e){console.warn("Could not write to file system (read-only)",e?.code)}}},5662:(e,t,r)=>{r.d(t,{R:()=>i});var a=r(7857);let n="https://xowceygzcekpzmttwaol.supabase.co",o="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inhvd2NleWd6Y2VrcHptdHR3YW9sIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njc2NzY1ODQsImV4cCI6MjA4MzI1MjU4NH0.zhSjaxZVnNaYTiHJ_HZCOBBpOxe1ufFUi3Wu79CNzcM";n&&o||console.warn("⚠️ Supabase URL or anon key not configured");let i=(0,a.eI)(n||"https://placeholder.supabase.co",o||"placeholder")}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[948,972,857],()=>r(5401));module.exports=a})();
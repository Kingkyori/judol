"use strict";(()=>{var e={};e.id=668,e.ids=[668],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},1017:e=>{e.exports=require("path")},5453:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>h,patchFetch:()=>j,requestAsyncStorage:()=>d,routeModule:()=>l,serverHooks:()=>g,staticGenerationAsyncStorage:()=>m});var n={};r.r(n),r.d(n,{GET:()=>u,POST:()=>p});var a=r(9303),s=r(8716),o=r(670),i=r(7070),c=r(4147);async function u(){try{let e=await (0,c.G)(),t=i.NextResponse.json(e);return t.headers.set("Cache-Control","no-store, no-cache, must-revalidate, proxy-revalidate"),t}catch(e){return console.error("Settings GET error:",e),i.NextResponse.json({error:"Gagal membaca pengaturan"},{status:500})}}async function p(e){try{let t=await e.json(),r={jackpotEnabled:!!t.jackpotEnabled,allowWin:!!t.allowWin,jackpotPercent:Number(t.jackpotPercent)};if(isNaN(r.jackpotPercent)||r.jackpotPercent<0||r.jackpotPercent>1)return i.NextResponse.json({error:"jackpotPercent harus 0.0 - 1.0"},{status:400});await (0,c.I)(r);let n=i.NextResponse.json(r);return n.headers.set("Cache-Control","no-store, no-cache, must-revalidate, proxy-revalidate"),n}catch(e){return console.error("Settings POST error:",e),i.NextResponse.json({error:e.message||"Gagal menyimpan pengaturan"},{status:500})}}let l=new a.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/settings/route",pathname:"/api/settings",filename:"route",bundlePath:"app/api/settings/route"},resolvedPagePath:"E:\\PROGRAM\\judol\\app\\api\\settings\\route.ts",nextConfigOutput:"",userland:n}),{requestAsyncStorage:d,staticGenerationAsyncStorage:m,serverHooks:g}=l,h="/api/settings/route";function j(){return(0,o.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:m})}},4147:(e,t,r)=>{r.d(t,{G:()=>p,I:()=>l});let n=require("fs");var a=r(1017),s=r.n(a);let o={jackpotEnabled:!0,jackpotPercent:.3,allowWin:!0},i=null,c=s().join(process.cwd(),"data","settings.json");async function u(){try{let e=await n.promises.readFile(c,"utf-8");return JSON.parse(e)}catch{return null}}async function p(){if(i)return i;let e=function(){try{let e=process.env.JUDOL_SETTINGS;if(e)return JSON.parse(e)}catch{}return null}();if(e)return i=e,e;let t=await u();return t?(i=t,t):(i=o,o)}async function l(e){i=e,function(e){try{process.env.JUDOL_SETTINGS=JSON.stringify(e)}catch{}}(e);let t=s().dirname(c);try{await n.promises.mkdir(t,{recursive:!0}),await n.promises.writeFile(c,JSON.stringify(e,null,2),"utf-8")}catch(e){console.warn("Could not write to file system (read-only)",e?.code)}}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[948,972],()=>r(5453));module.exports=n})();
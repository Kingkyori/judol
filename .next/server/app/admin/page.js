(()=>{var e={};e.id=3,e.ids=[3],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4972:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>c,routeModule:()=>h,tree:()=>d}),r(8748),r(5884),r(5866);var a=r(3191),n=r(8716),s=r(7922),i=r.n(s),l=r(5231),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);r.d(t,o);let d=["",{children:["admin",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,8748)),"E:\\PROGRAM\\judol\\app\\admin\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,5884)),"E:\\PROGRAM\\judol\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"]}],c=["E:\\PROGRAM\\judol\\app\\admin\\page.tsx"],u="/admin/page",p={require:r,loadChunk:()=>Promise.resolve()},h=new a.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/admin/page",pathname:"/admin",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},4455:(e,t,r)=>{Promise.resolve().then(r.bind(r,8381))},3497:(e,t,r)=>{Promise.resolve().then(r.bind(r,9188)),Promise.resolve().then(r.bind(r,1813))},9822:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,2994,23)),Promise.resolve().then(r.t.bind(r,6114,23)),Promise.resolve().then(r.t.bind(r,9727,23)),Promise.resolve().then(r.t.bind(r,9671,23)),Promise.resolve().then(r.t.bind(r,1868,23)),Promise.resolve().then(r.t.bind(r,4759,23))},8381:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});var a=r(326),n=r(7577),s=r(5047);function i(){(0,s.useRouter)();let[e,t]=(0,n.useState)(!1),[r,i]=(0,n.useState)(!0),[l]=(0,n.useState)({jackpotEnabled:!0,jackpotPercent:.3,allowWin:!0}),[o,d]=(0,n.useState)([]),[c,u]=(0,n.useState)(null),[p,h]=(0,n.useState)({}),[x,m]=(0,n.useState)(!0),[g,j]=(0,n.useState)(!1),[y,f]=(0,n.useState)(null),v=async()=>{m(!0);try{let e=new Date().getTime(),t=await fetch(`/api/players?t=${e}`,{cache:"no-store",headers:{"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0"}});if(t.ok){let e=await t.json();console.log("✅ Loaded",e.length,"players"),d(e)}else console.error("❌ Failed to load players:",t.status)}catch(e){console.error("Error loading players:",e)}finally{m(!1)}},b=async e=>{u(e),f(null);try{let t=await fetch(`/api/players/${e.id}`,{cache:"no-store"});if(t.ok){let e=await t.json();h(e)}else h({})}catch(e){console.error("Error loading player settings:",e),h({})}};async function P(){if(c){j(!0),f(null);try{console.log("Saving player settings:",{playerId:c.id,settings:p});let e=await fetch(`/api/players/${c.id}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(p)});console.log("API response status:",e.status);let t=await e.json();if(console.log("API response data:",t),!e.ok)throw Error(t.error||`Gagal menyimpan (${e.status})`);f(`✅ Setting pemain ${c.username} tersimpan!`);try{let e=await fetch(`/api/players/${c.id}`,{cache:"no-store"});if(e.ok){let t=await e.json();console.log("Reloaded settings:",t),h(t)}}catch{}}catch(e){console.error("Save player settings error:",e),f(`❌ Error: ${e.message||"Error saat menyimpan setting pemain"}`)}finally{j(!1)}}}return a.jsx("div",{className:"container",children:r?a.jsx("div",{style:{textAlign:"center",padding:"40px"},children:a.jsx("p",{children:"Loading..."})}):e?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 2fr",gap:20},children:[(0,a.jsxs)("div",{className:"card",children:[(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[a.jsx("h2",{style:{marginTop:0,marginBottom:0},children:"Daftar Pemain"}),a.jsx("button",{onClick:v,disabled:x,style:{padding:"6px 12px",backgroundColor:"#2563eb",color:"white",border:"none",borderRadius:"4px",cursor:x?"not-allowed":"pointer",opacity:x?.6:1,fontSize:"12px"},children:x?"⟳ Memuat...":"\uD83D\uDD04 Refresh"})]}),x?a.jsx("p",{children:"Memuat daftar pemain…"}):0===o.length?a.jsx("p",{style:{color:"#666"},children:"Belum ada pemain terdaftar"}):a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:8},children:o.map(e=>(0,a.jsxs)("button",{onClick:()=>b(e),style:{padding:"12px",border:c?.id===e.id?"2px solid #333":"1px solid #ddd",backgroundColor:c?.id===e.id?"#f0f0f0":"#fff",borderRadius:"6px",cursor:"pointer",textAlign:"left",transition:"all 0.2s"},children:[a.jsx("div",{style:{fontWeight:600,color:"#333",marginBottom:6},children:e.username}),(0,a.jsxs)("div",{style:{fontSize:"12px",color:"#666",lineHeight:1.5},children:[(0,a.jsxs)("div",{children:["\uD83D\uDCE7 ",e.email]}),(0,a.jsxs)("div",{children:["\uD83D\uDCB3 ",e.account_number," (",e.bank_type,")"]}),(0,a.jsxs)("div",{children:["\uD83D\uDC64 ",e.full_name]})]})]},e.id))})]}),a.jsx("div",{className:"card",children:c?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("h2",{style:{marginTop:0},children:["Setting Pemain: ",c.username]}),y&&a.jsx("div",{style:{padding:"12px",borderRadius:"6px",marginBottom:"16px",fontSize:"14px",backgroundColor:y.includes("Error")||y.includes("error")?"#ffebee":"#e8f5e9",color:y.includes("Error")||y.includes("error")?"#c62828":"#2e7d32",border:`1px solid ${y.includes("Error")||y.includes("error")?"#ef5350":"#66bb6a"}`},children:y}),a.jsx("form",{onSubmit:e=>{e.preventDefault(),P()},children:(0,a.jsxs)("div",{style:{display:"grid",gap:12},children:[(0,a.jsxs)("label",{style:{display:"flex",gap:10,alignItems:"center"},children:[a.jsx("span",{children:"Jackpot Aktif"}),a.jsx("input",{type:"checkbox",checked:p.jackpotenabled??l.jackpotEnabled,onChange:e=>h(t=>({...t,jackpotenabled:e.target.checked}))})]}),(0,a.jsxs)("label",{style:{display:"flex",gap:10,alignItems:"center"},children:[a.jsx("span",{children:"Izinkan Menang"}),a.jsx("input",{type:"checkbox",checked:p.allowwin??l.allowWin,onChange:e=>h(t=>({...t,allowwin:e.target.checked}))})]}),(0,a.jsxs)("label",{style:{display:"flex",gap:10,alignItems:"center"},children:[a.jsx("span",{children:"Presentase Jackpot"}),a.jsx("input",{type:"number",step:.01,min:0,max:1,value:p.jackpotpercent??l.jackpotPercent,onChange:e=>h(t=>({...t,jackpotpercent:Number(e.target.value)}))}),a.jsx("span",{style:{color:"#64748b"},children:"(0.0 - 1.0)"})]}),a.jsx("button",{className:"btn btn-primary",type:"submit",disabled:g,children:g?"Menyimpan...":"Simpan Setting Pemain"})]})})]}):a.jsx("p",{style:{color:"#666"},children:"Pilih pemain untuk mengatur setting"})})]}),a.jsx("div",{className:"card",children:a.jsx("p",{children:"Catatan: Perubahan di sini akan langsung mempengaruhi halaman User."})})]}):a.jsx("div",{style:{textAlign:"center",padding:"40px"},children:a.jsx("p",{children:"Silakan login sebagai admin terlebih dahulu."})})})}},9188:(e,t,r)=>{"use strict";r.d(t,{default:()=>l});var a=r(326),n=r(434),s=r(7541),i=r.n(s);function l(){return(0,a.jsxs)("nav",{className:i().nav,children:[a.jsx(n.default,{href:"/",children:"Beranda"}),a.jsx(n.default,{href:"/admin",children:"Admin"}),a.jsx(n.default,{href:"/auth/user-login",children:"User"})]})}},1813:(e,t,r)=>{"use strict";r.d(t,{AuthProvider:()=>i,a:()=>l});var a=r(326),n=r(7577);let s=(0,n.createContext)(void 0);function i({children:e}){let[t,r]=(0,n.useState)(null),[i,l]=(0,n.useState)(!0),o=async(e,t)=>{try{let a=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:t})}),n=await a.json();if(!a.ok)return{success:!1,message:n.message||"Login gagal"};return r(n.user),localStorage.setItem("judol_user",JSON.stringify(n.user)),{success:!0,message:"Login berhasil"}}catch(e){return console.error("Login error:",e),{success:!1,message:"Terjadi kesalahan"}}},d=async()=>{r(null),localStorage.removeItem("judol_user")};return a.jsx(s.Provider,{value:{user:t,isLoading:i,login:o,logout:d,isAuthenticated:!!t},children:e})}function l(){let e=(0,n.useContext)(s);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},5047:(e,t,r)=>{"use strict";var a=r(7389);r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}})},7541:e=>{e.exports={nav:"HeaderNav_nav__jYxbd",loginBtn:"HeaderNav_loginBtn__7X1hG",userMenu:"HeaderNav_userMenu__bUlai",username:"HeaderNav_username__Bd9zX",logoutBtn:"HeaderNav_logoutBtn___OIxE"}},8748:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>i,__esModule:()=>s,default:()=>l});var a=r(8570);let n=(0,a.createProxy)(String.raw`E:\PROGRAM\judol\app\admin\page.tsx`),{__esModule:s,$$typeof:i}=n;n.default;let l=(0,a.createProxy)(String.raw`E:\PROGRAM\judol\app\admin\page.tsx#default`)},5884:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>x,metadata:()=>h});var a=r(9510);r(7272);var n=r(8570);let s=(0,n.createProxy)(String.raw`E:\PROGRAM\judol\lib\auth-context.tsx`),{__esModule:i,$$typeof:l}=s;s.default;let o=(0,n.createProxy)(String.raw`E:\PROGRAM\judol\lib\auth-context.tsx#AuthProvider`);(0,n.createProxy)(String.raw`E:\PROGRAM\judol\lib\auth-context.tsx#useAuth`);let d=(0,n.createProxy)(String.raw`E:\PROGRAM\judol\app\components\HeaderNav.tsx`),{__esModule:c,$$typeof:u}=d;d.default;let p=(0,n.createProxy)(String.raw`E:\PROGRAM\judol\app\components\HeaderNav.tsx#default`),h={title:"Judol Learning App",description:"Admin-user linked settings demo"};function x({children:e}){return a.jsx("html",{lang:"id",children:a.jsx("body",{className:"app",children:(0,a.jsxs)(o,{children:[a.jsx("header",{className:"site-header",children:(0,a.jsxs)("div",{className:"site-header__inner",children:[a.jsx("div",{className:"brand",children:"Judol"}),a.jsx(p,{})]})}),a.jsx("main",{className:"site-main",children:e}),a.jsx("footer",{className:"site-footer",children:a.jsx("div",{className:"site-footer__inner",children:(0,a.jsxs)("span",{children:["\xa9 ",new Date().getFullYear()," Judol"]})})})]})})})}},7272:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[948,372],()=>r(4972));module.exports=a})();